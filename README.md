# うごくノート

うごメモ風アニメーション作成ツールです。
ブラウザ上で手軽にパラパラマンガやアニメーションを作成し、GIFや動画として書き出すことができます。

## 特徴

* **豊富な描画ツール**: ペン、消しゴム、塗りつぶし、スポイトに加えて、ドット絵モード、直線・四角・丸・星・ハートなどの図形ツール、テキスト入力機能を搭載。
* **ベクター描画対応**: 描画した線の制御点を後から編集（ベクター編集）することが可能です。
* **レイヤー機能**: 3つの描画レイヤー（A, B, C）と写真レイヤーに対応。
* **タイムラインとアニメーション**: コマの追加、複製、削除、並び替えが簡単。オニオンスキン機能で前後のコマを透かして見ながら作画できます。
* **充実の音声設定**: BGMの読み込みや、各コマに対する効果音（SE）の設定、マイクからの直接録音（4チャンネル対応）が可能です。
* **多彩なエクスポート**: 作成したアニメーションは、GIF、WebM(MP4)動画、PNG画像、PNG連番、SVG形式で書き出しできます。

## 主な機能

### キャンバス・描画設定
* **画面比率変更**: 4:3, 16:9, 1:1, 3:4, 9:16, HDから選択可能
* **用紙の色設定**: 用紙（背景）のカラーパレットを完備
* **対称描画**: 左右対称、上下対称、4方向の対称描画をサポート
* **変形ツール**: レイヤーの回転（90度、180度、任意角度）、左右・上下反転
* **選択ツール**: 矩形選択、なげなわ選択を用いたコピー＆ペースト、切り取り

### タイムライン設定
* **FPS設定**: アニメーションの再生速度（1〜30fps）を自由に調整可能
* **ループ再生**: 再生時のループON/OFF切り替え
* **コマの操作**: 複数コマの一括追加、コピー＆ペースト対応

### 保存と読み込み
* プロジェクトデータ（`.ugodraw`）としてのローカル保存と読み込み
* ブラウザのIndexedDBを利用した自動保存（オートセーブ）機能

## 構成・使用技術

* **HTML/CSS/JavaScript**: Vanilla JSで構築され、外部フレームワークへの依存を最小限に抑えています。
* **Canvas API**: 高速なラスタライズとベクター描画のプレビュー。
* **Web Audio API**: 音声の再生、録音、ミックスダウン。
* **WebCodecs API / mp4-muxer**: 動画（WebM/MP4）のエンコードと書き出しに使用。
* **Web Workers**: 塗りつぶし処理やGIFエンコードなど、重い処理をバックグラウンドで実行。

## セットアップと起動方法

本ツールは静的なWebサイトとして動作します。

1. リポジトリのファイルを任意のローカルサーバー（Vite, Live Server, Pythonのhttp.serverなど）でホストします。
2. ブラウザで `index.html` にアクセスします。

※ WebCodecsやマイクの録音機能などを使用するため、ローカル開発環境（`localhost`）または `https://` でのアクセスが推奨されます。

## ディレクトリ構造

```text
/
├── index.html            # メインのHTMLファイル
├── manifest.json         # PWA用マニフェスト
├── sw.js                 # Service Workerファイル
└── static/
    ├── css/
    │   └── app.css       # メインスタイルシート
    ├── icons/            # PWA用アイコン画像
    └── js/
        ├── app.js        # アプリのエントリーポイント
        ├── core/         # コアエンジン、状態管理、レンダラーなど
        ├── tools/        # 描画ツール、UI関連の処理
        ├── timeline/     # タイムライン管理
        ├── audio/        # 音声処理
        ├── export/       # 各種書き出し処理
        ├── storage/      # IndexedDB等への保存処理
        ├── ui/           # UIビルダー
        └── workers/      # Web Worker用スクリプト
